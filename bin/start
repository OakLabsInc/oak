#!/usr/bin/env electron

const { dialog } = require('electron')
const { resolve, join } = require('path')
const oak = require('oak')

let appPath = resolve(process.argv[2] || join(__dirname, '..', 'default'))

// we are (ideally) running without popups, so we will ignore the popup box for JS errors
dialog.showErrorBox = (title, err) => {
  return
}

// take on uncaughtExceptions, emit them to the logger
process.on('uncaughtException', e => {
  oak.message.emit('logger.error', {
    event: 'uncaughtException',
    err: e
  })
})

require(appPath)
